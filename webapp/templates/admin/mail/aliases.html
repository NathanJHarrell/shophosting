{% extends "admin/base_admin.html" %}

{% block title %}Mail Aliases{% endblock %}
{% block page_title %}Mail Aliases{% endblock %}

{% block content %}
<!-- Header with New Alias button -->
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
    <h2 style="margin: 0; font-size: 1.25rem; font-weight: 600;">All Aliases</h2>
    <a href="{{ url_for('admin.mail.create_alias') }}" class="btn btn-primary">
        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
        New Alias
    </a>
</div>

<!-- Results count -->
<p class="text-muted mb-4">{{ aliases|length }} aliases configured</p>

<!-- Alias Table -->
<div class="card">
    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>Alias</th>
                    <th>Destination</th>
                    <th>Status</th>
                    <th>Created</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for alias in aliases %}
                <tr>
                    <td class="mono">{{ alias.alias }}</td>
                    <td class="mono">{{ alias.destination_email }}</td>
                    <td>
                        {% if alias.is_active %}
                            <span class="badge badge-active">Active</span>
                        {% else %}
                            <span class="badge badge-suspended">Disabled</span>
                        {% endif %}
                    </td>
                    <td class="text-muted">{{ alias.created_at.strftime('%Y-%m-%d') if alias.created_at else '-' }}</td>
                    <td>
                        <form method="POST" action="{{ url_for('admin.mail.delete_alias', alias_id=alias.id) }}" style="display: inline;">
                            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                            <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to delete this alias?')">Delete</button>
                        </form>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="5" class="text-muted text-center">No aliases found</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
