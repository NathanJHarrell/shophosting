# ShopHosting.io Upstream Load Balancing Configuration
# Include this in your main nginx config: include /opt/shophosting/configs/nginx/shophosting-upstream.conf;
# Then use proxy_pass http://shophosting_app; instead of proxy_pass http://127.0.0.1:5000;

upstream shophosting_app {
    # Use least connections algorithm for better load distribution
    least_conn;

    # Primary instance
    server 127.0.0.1:5000;

    # Secondary instance (enable by uncommenting)
    server 127.0.0.1:5001;

    # Additional instances can be added:
    # server 127.0.0.1:5002;
    # server 127.0.0.1:5003;

    # Keep-alive connections to backend
    keepalive 32;
}
